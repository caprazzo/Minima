<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" href="favicon.ico" />
	<title>{{ BOARD_TITLE }}</title>
	
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/smoothness/jquery-ui.css" type="text/css" />
	
	{{ CSS_IMPORTS }}
	{{ LIB_IMPORTS }}
	{{ MAIN_IMPORTS }}
	
</head>
<body>
	
	<input type="hidden" id="minima-data-location" value="{{ DATA_LOCATION }}"/>
	<input type="hidden" id="minima-read-only" value="{{ READ_ONLY }}"/>
	<input type="hidden" id="minima-websocket-location" value="{{ WEBSOCKET_LOCATION }}"/>
	<input type="hidden" id="minima-comet-location" value="{{ COMET_LOCATION }}"/>
	
	<div class="wrapper">
		<div id="header">
				
			<div class="minima-logo">&nbsp;</div>
			<h1>{{ BOARD_TITLE }}</h1>
			<div id="controls">
				<div id="notifications_ctrl"></div>	
				<div id="list-create-ctrl"></div>
			</div>
		</div>
		<div id="content"><div id="board"></div></div>
		<div class="push"></div>
	</div>
	
	<div class="footer">
		<div id="readonly-notice">This board is read-only. Please <a href="{{ LOGIN_URL }}">login</a> to enable editing.</div>
	</div>
	
	<script type="text/template" id="notify-template">		
		  <span class="notify-ctrl-label">notifications:</span>
			<% if  (permission == 'allowed' || permission == 'not_allowed') { %>			
				<span class="notify-on <% if (active) { %> notify-on-selected <% } %>">ON</span><span class="notify-off <% if (!active) { %> notify-off-selected <% } %>">OFF</span>
			<% }  else if (permission == 'denied') { %>
				<span class="notify-ctrl-label">disabled</span>
			<% } else if (permission == 'not_supported') { %>
				<span class="notify-ctrl-label">not supported</span>
			<% } %>		
			<span class="notify-help">?</span>
			<div class="notify-help-topic">
				A notification is a popup displayed when there is an update for this board.
				<% if  (permission == 'allowed' || permission == 'not_allowed') { %>
						<% if (active) {  %>
							<br/><br/><strong>Notifications are turned on.</strong>
						<% } else { %>
							<br/><br/><strong>Notifications are turned off.</strong>
						<% } %>
				<% }  else if (permission == 'denied') { %>
						<p class="notify-help-topic-warn">
						Your browser disabled notifications for this page,
						but you can change this setting in your browser options.
						</p>
				<% } else if (permission == 'not_supported') { %>
						<p class="notify-help-topic-warn">
						Your browser does not support notifications.
						</p>
				<% } %>		
			</div>	
	</script>
	
	<script type="text/template" id="list-create-template">
		<span class="list-create-btn">add a list</span>
	</script>
	
	<script type="text/template" id="list-template">
		<div class="list-header"></div>
		<div class="list-notes"></div>
		<div class="list-footer"></div>
	</script>
	
	<script type="text/template" id="list-name-template">
		<span class="list-name-display"><%= name %></span>
		<input type="text" class="list-name-edit" value="<%= name %>"/>
	</script>
	
	<script type="text/template" id="note-create-template">	
		<textarea class="note-create-textarea"></textarea>
		<span class="note-create-btn">add note</span>
	</script>
	
	<script type="text/template" id="note-template">
		<div class="note-view">
			<span class="ui-icon ui-icon-trash note-archive-btn"></span>
			<%= obj.desc %>
		</div>
		<div class="note-edit">
			<textarea class="note-textarea"></textarea>
		</div>
	</script>
	
</body>
</html>